server {
    server_name _;
    listen 80;
    root /home/ubuntu/emptyinbox-me/static;
    index index.html;

    # Serve .well-known/passkey-endpoints with correct MIME type
    location = /.well-known/passkey-endpoints {
        default_type application/json;
        add_header Content-Type application/json;
        try_files $uri =404;
    }

    # Serve other .well-known files normally
    location ~ ^/.well-known/ {
        try_files $uri =404;
    }

    # Proxy API requests to Flask backend
    location /api {
        rewrite (^/api)(.*) $2 break;
        proxy_pass http://localhost:5000;
        proxy_pass_request_headers on;
    }
}